webpackJsonp([21],{Hxft:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("mvHQ"),a=s.n(o),i=(s("Qbok"),s("HY2O"),s("Au9i")),r=s("dw9j"),n=s("P9l9"),c=s("iBVz"),u=localStorage.header_visitorid,d=JSON.parse(localStorage.getItem("key")),h={name:"userLogin",components:{Heads:function(e){s.e(27).then(function(){var t=[s("2Hch")];e.apply(null,t)}.bind(this)).catch(s.oe)},qrcode:function(e){s.e(29).then(function(){var t=[s("VIRL")];e.apply(null,t)}.bind(this)).catch(s.oe)}},data:function(){return{checked:!1,phoneMsg:!1,passWordMsg:!1,userPhone:"",rememberMe:!1,postCodeState:!1,userPassWord:"",picCode:"",registerImgMsg:"",userCode:"",errCount:0}},mounted:function(){this.picCodeFun(u),null!=d&&(this.userPhone=d.userPhone,this.userPassWord=d.password,this.phoneMsg=!0,this.passWordMsg=!0)},methods:{isWeiXin:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},gowx:function(){if(this.isWeiXin()){var e={appid:"wx9b81631e4bbf292e",redirect_uri:"http%3a%2f%2fwww.yhwxc.com",response_type:"code",scope:"snsapi_userinfo",state:"STATE#wechat_redirect"};window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e.appid+"&redirect_uri="+e.redirect_uri+"&response_type="+e.response_type+"&scope="+e.scope+"&state="+e.state}else this.$router.push({path:"/wechat"})},picCodeFun:function(e){var t=this;Object(r.a)(""+n.a.USERCAPTCHA_API,"GET",{uuid:e}).then(function(e){console.log(e.data),t.picCode=e.data})},postPicMsg:function(e){this.picCodeFun(u)},checkedChange:function(){this.checked=!this.checked,this.rememberMe=!this.rememberMe},checkPhone:function(){if(""===this.userPhone)return Object(i.Toast)({message:"*手机号输入错误！",duration:1e3}),!1;/^0?(13[0-9]|14[5-9]|15[012356789]|166|17[0-8]|18[0-9]|19[89])[0-9]{8}$/.test(this.userPhone)?this.phoneMsg=!0:(this.phoneMsg=!1,Object(i.Toast)({message:"*手机号输入错误！",duration:1e3}))},checkPassWord:function(){if(""===this.userPassWord)return Object(i.Toast)({message:"*密码格式错误！",duration:1e3}),!1;/^[\w]{6,12}$/.test(this.userPassWord)?this.passWordMsg=!0:(this.passWordMsg=!1,Object(i.Toast)({message:"*密码格式错误！",duration:1e3}))},userLogin:function(){var e=this;if(!this.phoneMsg)return Object(i.Toast)({message:"*手机号输入错误！",duration:1e3}),!1;if(!this.userPassWord)return Object(i.Toast)({message:"*密码格式错误！",duration:1e3}),!1;if(this.rememberMe){var t={userPhone:this.userPhone,password:this.userPassWord};localStorage.setItem("key",a()(t))}if(this.postCodeState&&""===this.registerImgMsg)return Object(i.Toast)({message:"*验证码不能为空！",duration:1e3}),!1;this.phoneMsg&&this.userPassWord&&Object(r.a)(""+n.a.LOGIN_API,"POST",{account_num:this.userPhone,password:this.userPassWord,verificate_code:this.registerImgMsg}).then(function(t){if(0===t.data.code)c.c.setData(c.a,t.data.token),window.history.go(-1);else{if(!(t.data.login_num>3))return 20008===t.data.code?(Object(i.Toast)({message:"*账户已锁定！",duration:1e3}),!1):(Object(i.Toast)({message:t.data.msg,duration:1e3}),!1);e.postCodeState=!0}})}}},g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"userLogin"}},[s("heads",{attrs:{tit:"登录",rigister:"注册"}}),e._v(" "),e._m(0),e._v(" "),s("div",{staticClass:"formLogin"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPhone,expression:"userPhone"}],attrs:{type:"tel",name:"mobile",placeholder:"请输入手机号",maxlength:"11"},domProps:{value:e.userPhone},on:{blur:function(t){e.checkPhone()},input:function(t){t.target.composing||(e.userPhone=t.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPassWord,expression:"userPassWord"}],attrs:{type:"password",name:"password",placeholder:"请输入密码",maxlength:"16"},domProps:{value:e.userPassWord},on:{blur:function(t){e.checkPassWord()},input:function(t){t.target.composing||(e.userPassWord=t.target.value)}}}),e._v(" "),e.postCodeState?s("div",{staticClass:"pushMsg"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerImgMsg,expression:"registerImgMsg"}],staticClass:"entry",attrs:{name:"entry",type:"text",placeholder:"请输入验证码"},domProps:{value:e.registerImgMsg},on:{blur:function(t){e.checkImgMsg()},input:function(t){t.target.composing||(e.registerImgMsg=t.target.value)}}}),e._v(" "),s("input",{staticClass:"post",attrs:{type:"image",src:e.picCode},on:{click:e.postPicMsg}})]):e._e()]),e._v(" "),s("p",{staticClass:"login_p"},[s("span",{on:{click:function(t){e.checkedChange()}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}],staticClass:"check_true"})]),e._v(" "),s("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.checkedChange()}}},[e._v("记住我")]),e._v(" "),s("router-link",{staticClass:"m",attrs:{tag:"span",to:"/forgotPassword"}},[e._v("忘记密码？点这里")])],1),e._v(" "),s("button",{staticClass:"goRegister login_button",attrs:{id:"register"},on:{click:e.userLogin}},[e._v("登 录")]),e._v(" "),s("span",{staticClass:"x"},[s("a",{staticStyle:{color:"#999"},attrs:{href:"javascript:;"}},[e._v("登录即表示同意")]),e._v(" "),s("router-link",{staticClass:"tab-iteam bookCity",attrs:{tag:"a",to:"/agreement"}},[e._v("《有狐阅读服务协议》")])],1),e._v(" "),s("h6",{staticClass:"LoginAway_title"},[e._v("社交账户登录")]),e._v(" "),s("ul",{staticClass:"LoginAway_choose"},[s("li",{staticClass:"Login_wx",on:{click:e.gowx}}),e._v(" "),s("li",{staticClass:"Login_qq"})]),e._v(" "),s("qrcode")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:s("SvvV")}})])}]};var p=s("VU/8")(h,g,!1,function(e){s("foSo")},"data-v-21678de9",null);t.default=p.exports},foSo:function(e,t){}});