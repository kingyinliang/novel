webpackJsonp([24],{KEzc:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o("HY2O");var n=o("dw9j"),s=o("P9l9"),i=o("Au9i"),a=o("iBVz").c.getData("client_authorization_token"),c={name:"modifyPhone",data:function(){return{wechat:!0,newPhone:"",picCodeValue:"",checkphone:"",picCode:"",phoneCode:"",postPhoneCode:!0,show:!0,count:"",timer:null}},mounted:function(){this.picCodeFun(a)},methods:{picCodeFun:function(e){var t=this;Object(n.a)(""+s.a.USERCAPTCHA_API,"GET",{uuid:e},!1,!0).then(function(e){console.log(e.data),t.picCode=e.data})},postPicMsg:function(e){this.picCodeFun(a)},checkImgMsg:function(e){""==this.picCodeValue&&Object(i.Toast)({message:"*请输入图片验证码！",duration:1e3})},checkPhoneMsg:function(e){return""==this.picCodeValue?(Object(i.Toast)({message:"*请输入图片验证码！",duration:1e3}),!1):""==this.phoneCode?(Object(i.Toast)({message:"*请输入手机验证码！",duration:1e3}),!1):void 0},getCode:function(){var e=this;this.timer||(this.count=60,this.show=!1,this.timer=setInterval(function(){e.count>0&&e.count<=60?e.count--:(e.show=!0,e.postPhoneCode=!0,clearInterval(e.timer),e.timer=null)},1e3))},postPhoneMsg:function(e){var t=this;""!=this.picCodeValue&&this.postPhoneCode?(this.postPhoneCode=!1,Object(n.a)(""+s.a.POSTPHONEMSG_API,"GET",{uuid:a,mobile:this.newPhone}).then(function(e){"0"==e.data.code&&t.getCode()})):Object(i.Toast)({message:"*请输入图片验证码！",duration:1e3})},postForm:function(){var e=this;""!=this.picCodeValue&&""!=this.phoneCode?Object(n.a)(""+s.a.BINDPHONE_API,"POST",{phone:this.newPhone,captcha:this.picCodeValue,mobileCode:this.phoneCode}).then(function(t){0==t.data.code?e.$router.push({path:"/home"}):Object(i.Toast)({message:t.data.msg,duration:1e3})}):Object(i.Toast)({message:"*请完善信息后，在提交！",duration:1e3})}},components:{Heads:function(e){o.e(27).then(function(){var t=[o("2Hch")];e.apply(null,t)}.bind(this)).catch(o.oe)}}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("heads",{attrs:{tit:"新手机绑定",wechat:e.wechat}}),e._v(" "),o("div",{staticClass:"modifyPhone"},[o("ul",[o("li",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.newPhone,expression:"newPhone"}],staticClass:"phone",attrs:{type:"text",placeholder:"请输入您要绑定的新手机号"},domProps:{value:e.newPhone},on:{input:function(t){t.target.composing||(e.newPhone=t.target.value)}}})]),e._v(" "),o("li",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.picCodeValue,expression:"picCodeValue"}],staticClass:"pic_Code",attrs:{type:"text",placeholder:"请输入图片验证码"},domProps:{value:e.picCodeValue},on:{blur:function(t){e.checkImgMsg()},input:function(t){t.target.composing||(e.picCodeValue=t.target.value)}}}),e._v(" "),o("input",{staticClass:"post",attrs:{type:"image",src:e.picCode},on:{click:e.postPicMsg}})]),e._v(" "),o("li",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneCode,expression:"phoneCode"}],staticClass:"entryMsg",attrs:{type:"text",name:"entryMsg",placeholder:"请输入校验码"},domProps:{value:e.phoneCode},on:{blur:function(t){e.checkPhoneMsg()},input:function(t){t.target.composing||(e.phoneCode=t.target.value)}}}),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"postMsg",on:{click:e.postPhoneMsg}},[e._v("获取验证码")]),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count postMsg"},[e._v(e._s(e.count)+" s")])])]),e._v(" "),o("button",{staticClass:"goRegister login_button",attrs:{id:"register"},on:{click:e.postForm}},[e._v("确认绑定")])])],1)},staticRenderFns:[]};var h=o("VU/8")(c,u,!1,function(e){o("MJHG")},null,null);t.default=h.exports},MJHG:function(e,t){}});