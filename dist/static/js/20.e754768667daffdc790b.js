webpackJsonp([20],{"2LDi":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),i=s("NYxO"),c=s("dw9j"),o=s("P9l9"),r=s("Au9i"),l={name:"commentDetail",data:function(){return{reply:{},content:"",tru:!0,showmask:!1}},mounted:function(){this.getreply()},methods:{getreply:function(){var t=this;Object(c.a)(""+o.a.COMMENTREPLY_API,"GET",{pageNo:1,pageSize:10,review_code:this.commentid}).then(function(e){t.reply=e.data})},showTextarea:function(){this.showmask=!0,this.$nextTick(function(){this.$refs.textarea.focus()})},closeTextarea:function(){this.showmask=!1},goReply:function(){var t=this;if(this.showmask=!1,""===this.content)return Object(r.Toast)({message:"不能回复空内容",duration:2e3}),!1;Object(c.a)(""+o.a.ADDREPLY_API,"POST",{review_code:this.commentid,content:this.content}).then(function(e){0===e.data.code?(Object(r.Toast)({message:"回复成功",duration:2e3}),t.getreply()):20001===e.data.code?r.MessageBox.alert("请登录后评论").then(function(e){t.$router.push({path:"/login"})}):Object(r.Toast)({message:e.data.msg,duration:2e3})})}},computed:n()({},Object(i.c)({commentid:function(t){return t.comment.commentid},comment:function(t){return t.comment.comment}})),components:{Heads:function(t){s.e(27).then(function(){var e=[s("2Hch")];t.apply(null,e)}.bind(this)).catch(s.oe)},Gotop:function(t){s.e(28).then(function(){var e=[s("ZrgH")];t.apply(null,e)}.bind(this)).catch(s.oe)}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("heads",{attrs:{tit:"书评详情"}}),t._v(" "),s("div",{staticClass:"commentdetail"},[s("div",{staticClass:"commentMain"},[s("ul",[s("li",[s("div",{staticClass:"userName clearfix"},[s("img",{attrs:{src:t.comment.reader_portrait,alt:""}}),t._v(" "),s("div",{staticClass:"rightdiv"},[s("p",{staticClass:"names"},[t._v(t._s(t.comment.reader_name))]),t._v(" "),s("p",{staticClass:"commentBtn"},[s("span",{staticClass:"commentTimes"},[t._v(t._s(t.comment.reply_time))])])])]),t._v(" "),s("div",{staticClass:"commentTxt"},[s("p",[t._v(t._s(t.comment.content))])])])])]),t._v(" "),s("div",{staticClass:"reply"},[s("p",{staticClass:"tit clearfix"},[s("i"),s("span",[t._v("全部回复（"+t._s(t.reply.totalCount)+"）")])]),t._v(" "),s("div",{staticClass:"commentMain"},[s("ul",t._l(t.reply.list,function(e,a){return s("li",{key:a},[s("div",{staticClass:"userName clearfix"},[s("img",{attrs:{src:e.reader_portrait,alt:""}}),t._v(" "),s("div",{staticClass:"rightdiv clearfix"},[s("p",{staticClass:"names"},[t._v(t._s(e.reader_name))]),t._v(" "),s("p",{staticClass:"commentBtn"},[s("span",{staticClass:"commentTimes"},[t._v(t._s(e.reply_time))])])])]),t._v(" "),s("div",{staticClass:"commentTxt"},[s("p",[t._v(t._s(e.content))])])])}))])]),t._v(" "),s("div",{staticClass:"goreply",on:{click:t.showTextarea}},[s("i",{staticClass:"iconfont novel-commenticon"}),t._v(" "),s("span",[t._v("回复")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showmask,expression:"showmask"}],staticClass:"textarea"},[s("p",{staticClass:"clearfix"},[s("a",{staticClass:"close",on:{click:t.closeTextarea}},[t._v("取消")]),s("a",{staticClass:"goReply",on:{click:t.goReply}},[t._v("发表")])]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"textarea",attrs:{maxlength:"300"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showmask,expression:"showmask"}],staticClass:"mask",on:{click:t.closeTextarea}})]),t._v(" "),s("gotop")],1)},staticRenderFns:[]};var v=s("VU/8")(l,m,!1,function(t){s("l9DP")},"data-v-3720372b",null);e.default=v.exports},l9DP:function(t,e){}});