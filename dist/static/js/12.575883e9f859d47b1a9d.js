webpackJsonp([12],{"a/Ob":function(t,o){},uHpZ:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=e("Dd8w"),s=e.n(a),i=e("NYxO"),n=e("dw9j"),l=e("P9l9"),c=e("Au9i"),r={name:"booksList",data:function(){return{allLoaded:!1,pageNo:1,totalCount:1,popupVisible:!1,taba:["人气","收藏","推荐","字数","时间"],tabanum:0,book:[],bookfilters:{words_type_num:"no",charge_type_num:"no",book_status_num:"no",update_type_num:"no",words_type:["30万以下","30~50万","50~100万","100~200万","200万以上"],charge_type:["免费","限免","VIP"],book_status:["连载中","已完结"],update_type:["三天内","七天内","半月内","一月内"]}}},mounted:function(){document.getElementById("Router").scrollTop=0},computed:s()({},Object(i.c)({classifyname:function(t){return t.classify.classifyname},classifyid:function(t){return t.classify.classifyid}})),components:{Heads:function(t){e.e(27).then(function(){var o=[e("2Hch")];t.apply(null,o)}.bind(this)).catch(e.oe)},Gotop:function(t){e.e(28).then(function(){var o=[e("ZrgH")];t.apply(null,o)}.bind(this)).catch(e.oe)}},filters:{tofixed:function(t){return(t/=1e4).toFixed(1)}},methods:{getbooklist:function(){var t=this;Object(n.a)(""+l.a.BOOKSLIST_API,"POST",{class_code:this.classifyid,pageNo:1,pageSize:10,sort_type:this.tabanum+1}).then(function(o){c.Indicator.close(),t.book=o.data.books,t.totalCount=o.data.totalCount})},change:function(t){c.Indicator.open(),this.tabanum=t,this.pageNo=1,this.getbooklist()},chagefile1:function(t){this.bookfilters.words_type_num=t},chagefile2:function(t){this.bookfilters.charge_type_num=t},chagefile3:function(t){this.bookfilters.book_status_num=t},chagefile4:function(t){this.bookfilters.update_type_num=t},resetfiltra:function(){this.bookfilters.words_type_num="no",this.bookfilters.charge_type_num="no",this.bookfilters.book_status_num="no",this.bookfilters.update_type_num="no"},setobjdata:function(){var t={};return t.class_code=this.classifyid,t.pageNo=this.pageNo,t.pageSize=10,t.sort_type=this.tabanum+1,"no"!==this.bookfilters.words_type_num&&(t.words_type=this.bookfilters.words_type_num+1),"no"!==this.bookfilters.charge_type_num&&(t.charge_type=this.bookfilters.charge_type_num),"no"!==this.bookfilters.book_status_num&&(t.book_status=this.bookfilters.book_status_num),"no"!==this.bookfilters.update_type_num&&(t.update_type=this.bookfilters.update_type_num),t},updateList:function(){var t=this;this.pageNo=1,this.popupVisible=!1,c.Indicator.open(),Object(n.a)(""+l.a.BOOKSLIST_API,"POST",this.setobjdata()).then(function(o){c.Indicator.close(),t.gotop(),t.book=o.data.books,t.totalCount=o.data.totalCount})},loadMore:function(){var t=this;if(this.pageNo>Math.ceil(this.totalCount/10))return this.allLoaded=!0,Object(c.Toast)({message:"暂无更多图书",duration:1e3}),this.$refs.loadmore.onBottomLoaded(),!1;Object(n.a)(""+l.a.BOOKSLIST_API,"POST",this.setobjdata()).then(function(o){t.book=t.book.concat(o.data.books),t.totalCount=o.data.totalCount,t.$refs.loadmore.onBottomLoaded()}),this.pageNo++},bookfiltrate:function(){this.popupVisible=!0},close:function(){this.popupVisible=!1}}},u={render:function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{style:{"overflow-y":t.popupVisible?"hidden":"scroll"},attrs:{id:"container"}},[a("heads",{attrs:{tit:t.classifyname}}),t._v(" "),a("div",{staticClass:"tab clearfix"},[a("div",{staticClass:"filtrate",on:{click:t.bookfiltrate}},[a("i",{staticClass:"iconfont novel-sift"}),t._v(" "),a("span",[t._v("筛选")])]),t._v(" "),a("div",{staticClass:"tabs"},t._l(t.taba,function(o,e){return a("a",{key:o,class:{active:t.tabanum==e},on:{click:function(o){t.change(e)}}},[a("span",[t._v(t._s(o))]),t._v(" "),a("i")])}))]),t._v(" "),a("div",{staticClass:"bookList"},[a("mt-loadmore",{ref:"loadmore",attrs:{"bottom-method":t.loadMore,"bottom-all-loaded":t.allLoaded,"auto-fill":!1}},[a("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":""}},t._l(t.book,function(o,s){return a("li",{key:s,staticClass:"clearfix"},[a("router-link",{attrs:{tag:"a",to:{path:"/bookdetail",query:{datailid:o.book_serial_num}}},nativeOn:{click:function(e){t.$store.commit("saveDetailid",o.book_serial_num)}}},[null!=o.cover_img?a("a",[null!=o.cover_img?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:o.cover_img,expression:"item.cover_img"},{name:"lazy",rawName:"v-lazy.container",value:o.cover_img,expression:"item.cover_img",modifiers:{container:!0}}],attrs:{src:o.cover_img,alt:"小说封面"}}):t._e()]):t._e(),t._v(" "),null==o.cover_img?a("img",{attrs:{src:e("R0jw"),alt:"小说封面"}}):t._e(),t._v(" "),a("div",{staticClass:"text"},[a("p",{staticClass:"tit"},[t._v(t._s(o.main_title))]),t._v(" "),a("p",{staticClass:"txt"},[t._v(t._s(o.summary.length>40?o.summary.slice(0,40)+"...":o.summary))]),t._v(" "),a("p",{staticClass:"plable clearfix"},[a("i",[t._v(t._s(o.author_name))]),t._v(" "),a("i",[t._v(t._s(t._f("tofixed")(o.total_words))+"万字")]),t._v(" "),a("span",[t._v(t._s(o.class_Name))]),t._v(" "),a("span",{staticStyle:{margin:"0"}},[t._v(t._s(0==o.book_status?"连载中":"已完结"))])])])])],1)}))])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"mask",on:{click:t.close}}),t._v(" "),a("transition",{attrs:{name:t.popupVisible?"filtrate-left":"filtrate-right"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.popupVisible,expression:"popupVisible"}],staticClass:"bookfiltrate"},[a("div",{staticClass:"shadeMain"},[a("p",{staticClass:"shadeTit"},[t._v("筛选")]),t._v(" "),a("p",{staticClass:"txt"},[t._v("作品字数")]),t._v(" "),a("div",{staticClass:"optionBox clearfix"},t._l(t.bookfilters.words_type,function(o,e){return a("span",{key:e,class:{active:t.bookfilters.words_type_num==e},on:{click:function(o){t.chagefile1(e)}}},[t._v(t._s(o))])})),t._v(" "),a("p",{staticClass:"txt"},[t._v("收费状态")]),t._v(" "),a("div",{staticClass:"optionBox clearfix"},t._l(t.bookfilters.charge_type,function(o,e){return a("span",{key:e,class:{active:t.bookfilters.charge_type_num==e},on:{click:function(o){t.chagefile2(e)}}},[t._v(t._s(o))])})),t._v(" "),a("p",{staticClass:"txt"},[t._v("作品状态")]),t._v(" "),a("div",{staticClass:"optionBox clearfix"},t._l(t.bookfilters.book_status,function(o,e){return a("span",{key:e,class:{active:t.bookfilters.book_status_num==e},on:{click:function(o){t.chagefile3(e)}}},[t._v(t._s(o))])})),t._v(" "),a("p",{staticClass:"txt"},[t._v("更新状态")]),t._v(" "),a("div",{staticClass:"optionBox clearfix"},t._l(t.bookfilters.update_type,function(o,e){return a("span",{key:e,class:{active:t.bookfilters.update_type_num==e},on:{click:function(o){t.chagefile4(e)}}},[t._v(t._s(o))])}))]),t._v(" "),a("div",{staticClass:"filtratebtn"},[a("a",{on:{click:t.resetfiltra}},[t._v("重 置")]),t._v(" "),a("a",{staticClass:"truego",on:{click:t.updateList}},[t._v("完 成")])])])]),t._v(" "),a("gotop",{attrs:{gotopswith:!0}})],1)},staticRenderFns:[]};var _=e("VU/8")(r,u,!1,function(t){e("a/Ob")},"data-v-aa9a741e",null);o.default=_.exports}});