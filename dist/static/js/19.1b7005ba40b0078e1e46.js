webpackJsonp([19],{"6SZk":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o("HY2O");var s=o("dw9j"),n=o("P9l9"),c=o("Au9i"),i=o("iBVz").c.getData("client_authorization_token"),a={name:"checkPhone",data:function(){return{wechat:!0,checkphoneNumber:"",picCodeValue:"",checkphone:"",picCode:"",phoneCode:"",postPhoneCode:!0,show:!0,count:"",timer:null,checkUserPhone:!0}},mounted:function(){this.picCodeFun(i)},methods:{picCodeFun:function(e){var t=this;Object(s.a)(""+n.a.USERCAPTCHA_API,"GET",{uuid:e},!1,!0).then(function(e){t.picCode=e.data})},checkPhone:function(e){/^0?(13[0-9]|14[5-9]|15[012356789]|166|17[0-8]|18[0-9]|19[89])[0-9]{8}$/.test(this.checkphoneNumber)?this.checkUserPhone=!1:(this.checkUserPhone=!0,Object(c.Toast)({message:"*手机号输入错误！",duration:1e3}))},postPicMsg:function(e){this.picCodeFun(i)},checkImgMsg:function(e){""==this.picCodeValue&&Object(c.Toast)({message:"*请输入图片验证码！",duration:1e3})},checkPhoneMsg:function(e){return this.checkUserPhone?(Object(c.Toast)({message:"*请输入手机号！",duration:1e3}),!1):""==this.picCodeValue?(Object(c.Toast)({message:"*请输入图片验证码！",duration:1e3}),!1):""==this.phoneCode?(Object(c.Toast)({message:"*请输入手机验证码！",duration:1e3}),!1):void 0},getCode:function(){var e=this;this.timer||(this.count=60,this.show=!1,this.timer=setInterval(function(){e.count>0&&e.count<=60?e.count--:(e.show=!0,e.postPhoneCode=!0,clearInterval(e.timer),e.timer=null)},1e3))},postPhoneMsg:function(e){var t=this;if(this.checkUserPhone)return Object(c.Toast)({message:"*请输入手机号！",duration:1e3}),!1;""!=this.picCodeValue&&this.postPhoneCode?(this.postPhoneCode=!1,Object(s.a)(""+n.a.POSTPHONEMSG_API,"GET",{uuid:i,mobile:this.checkphone}).then(function(e){"0"==e.data.code&&t.getCode()})):Object(c.Toast)({message:"*请输入图片验证码！",duration:1e3})},postForm:function(){var e=this;""!=this.picCodeValue&&""!=this.phoneCode?Object(s.a)(""+n.a.BINDPHONE_API,"POST",{phone:this.checkphone,captcha:this.picCodeValue,mobileCode:this.phoneCode}).then(function(t){0==t.data.code?e.$router.push({path:"/home"}):Object(c.Toast)({message:t.data.msg,duration:1e3})}):Object(c.Toast)({message:"*请完善信息后，在提交！",duration:1e3})}},components:{Heads:function(e){o.e(27).then(function(){var t=[o("2Hch")];e.apply(null,t)}.bind(this)).catch(o.oe)}}},h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("heads",{attrs:{tit:"修改手机",wechat:e.wechat}}),e._v(" "),o("div",{staticClass:"checkPhone"},[o("ul",[o("li",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.checkphoneNumber,expression:"checkphoneNumber"}],staticClass:"phone",attrs:{type:"text",placeholder:"请输入您要绑定的手机号"},domProps:{value:e.checkphoneNumber},on:{blur:function(t){e.checkPhone()},input:function(t){t.target.composing||(e.checkphoneNumber=t.target.value)}}})]),e._v(" "),o("li",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.picCodeValue,expression:"picCodeValue"}],staticClass:"pic_Code",attrs:{type:"text",placeholder:"请输入图片验证码"},domProps:{value:e.picCodeValue},on:{blur:function(t){e.checkImgMsg()},input:function(t){t.target.composing||(e.picCodeValue=t.target.value)}}}),e._v(" "),o("input",{staticClass:"post",attrs:{type:"image",src:e.picCode},on:{click:e.postPicMsg}})]),e._v(" "),o("li",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneCode,expression:"phoneCode"}],staticClass:"entryMsg",attrs:{type:"text",name:"entryMsg",placeholder:"请输入校验码"},domProps:{value:e.phoneCode},on:{blur:function(t){e.checkPhoneMsg()},input:function(t){t.target.composing||(e.phoneCode=t.target.value)}}}),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"postMsg",on:{click:e.postPhoneMsg}},[e._v("获取验证码")]),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count postMsg"},[e._v(e._s(e.count)+" s")])])]),e._v(" "),o("button",{staticClass:"goRegister login_button",attrs:{id:"register"},on:{click:e.postForm}},[e._v("确认绑定")])])],1)},staticRenderFns:[]};var u=o("VU/8")(a,h,!1,function(e){o("qhIf")},null,null);t.default=u.exports},qhIf:function(e,t){}});